
#Область Штрихкодирование

 Функция ТипШтрихкода(Штрихкод) Экспорт
	
	ТипШтрихкодаРТ = Неопределено;
	
	//ПЕРЕОПРЕДЕЛЕНИЕ//
	///////////////////
	
	Возврат ТипШтрихкодаРТ;
	
КонецФункции

Функция ПодобратьGTINДляЗаказа(Номенклатура, Упаковка, Характеристика, ХарактеристикиИспользуются, ЭтоТабак = Ложь) Экспорт
	
	Запрос = Новый Запрос();
	ТекстЗапроса = "ВЫБРАТЬ
	|	ШтрихкодыНоменклатуры.Штрихкод КАК Штрихкод
	|ИЗ
	//ПЕРЕОПРЕДЕЛЕНИЕ//
	|	РегистрСведений.ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
	|ГДЕ
	|	ШтрихкодыНоменклатуры.Номенклатура = &Номенклатура
	///////////////////
	|	<Характеристики>
	|	<Упаковка>";
	
	//ПЕРЕОПРЕДЕЛЕНИЕ//
	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "<Характеристики>", "");
	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "<Упаковка>", "");
	///////////////////			   
	
	Запрос.Текст = ТекстЗапроса;
	Запрос.УстановитьПараметр("Номенклатура", Номенклатура);
	Если ХарактеристикиИспользуются Тогда
		Запрос.УстановитьПараметр("Характеристика", Характеристика);
	КонецЕсли;
	Если ЗначениеЗаполнено(Упаковка) Тогда
		Запрос.УстановитьПараметр("Упаковка", Упаковка);
	КонецЕсли;

	Выборка = Запрос.Выполнить().Выбрать();
	
	МассивШтрихкодов = Новый Массив();
	
	Пока Выборка.Следующий() Цикл
		МассивШтрихкодов.Добавить(РазборИОбработкаКодовМаркировкиИСМПТКСлужебныйКлиентСервер.GTINПоШтрихкодуEAN(Выборка.Штрихкод));
	КонецЦикла;

	Возврат МассивШтрихкодов;
	
КонецФункции

#КонецОбласти
