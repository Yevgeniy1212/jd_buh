
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда
	
////////////////////////////////////////////////////////////////////////////////
// ПРОГРАММНЫЙ ИНТЕРФЕЙС

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	
	// В базе несколько организаций (Фо включена). 
	// При создании нового документа, если установлен отбор в форме списка, заполняем организацию по нему.
	// Если отбор не установлен, берем организацию по умолчанию для пользователя. 
	// Если она не заполнена или если отбор не установлен - создаем с пустой организацией.
	// В базе одна организация (ФО отключена). Отбор в форме списка скрыт. При создании заполняем единсвенной организацией, которая есть в базе.
	
	ТипДанныхЗаполнения = ТипЗнч(ДанныеЗаполнения);
	
	Если ПолучитьФункциональнуюОпцию("ИспользоватьНесколькоОрганизаций") Тогда  
		Если ДанныеЗаполнения <> Неопределено Тогда // Отбор установлен
			Если ТипДанныхЗаполнения <> Тип("Структура") 
				И Метаданные().ВводитсяНаОсновании.Содержит(ДанныеЗаполнения.Метаданные()) Тогда
				
				Возврат;
			ИначеЕсли ТипДанныхЗаполнения = Тип("Структура") Тогда 
				Если ДанныеЗаполнения.Свойство("Автор") Тогда
					ДанныеЗаполнения.Удалить("Автор");
				КонецЕсли;
				ЗаполнитьЗначенияСвойств(ЭтотОбъект, ДанныеЗаполнения);
			КонецЕсли;
			ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ЭтотОбъект, ОбщегоНазначенияБКВызовСервераПовтИсп.ПолучитьВалютуРегламентированногоУчета());
		Иначе
			ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ЭтотОбъект, ОбщегоНазначенияБКВызовСервераПовтИсп.ПолучитьВалютуРегламентированногоУчета());  // Заполняем организацией по умолчанию
		КонецЕсли;
	Иначе
		ЭтотОбъект.Организация = Справочники.Организации.ОрганизацияПоУмолчанию();
	КонецЕсли;                        
			
КонецПроцедуры

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	МассивНепроверяемыхРеквизитов = Новый Массив();
	
	Если НЕ ВидОперации = Перечисления.ВидыОперацийИнвентаризацияДенежныхСредств.ПоКассе Тогда
		МассивНепроверяемыхРеквизитов.Добавить("Касса");
	КонецЕсли;
	
	ОбщегоНазначения.УдалитьНепроверяемыеРеквизитыИзМассива(ПроверяемыеРеквизиты, МассивНепроверяемыхРеквизитов);

КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)
	
	Дата = НачалоДня(ОбщегоНазначения.ТекущаяДатаПользователя());

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

#КонецЕсли

