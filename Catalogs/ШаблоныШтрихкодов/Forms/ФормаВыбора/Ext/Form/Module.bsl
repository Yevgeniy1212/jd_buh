#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	Если Параметры.Отбор.Свойство("ТипШаблона") Тогда
		Если Параметры.Отбор.ТипШаблона = Перечисления.ТипыШаблоновШтрихкодов.Номенклатура Тогда
			Элементы.ФормаСоздатьНовыйОС.Видимость = Ложь;
		ИначеЕсли Параметры.Отбор.ТипШаблона = Перечисления.ТипыШаблоновШтрихкодов.ОсновныеСредства Тогда
			Элементы.ФормаСоздатьНовыйНоменклатура.Видимость = Ложь;
		КонецЕсли;		

	КонецЕсли;
	
	ДоступностьИзменений = ПравоДоступа("Изменение", Метаданные.Справочники.ШаблоныШтрихкодов);
	
	КнопкаНовыйНоменклатура = Элементы.Найти("ФормаСоздатьНовыйНоменклатура");
	
	Если КнопкаНовыйНоменклатура <> Неопределено Тогда
		КнопкаНовыйНоменклатура.Доступность = ДоступностьИзменений;
	КонецЕсли;
	
	КнопкаНовыйОС = Элементы.Найти("ФормаСоздатьНовыйОС");
	
	Если КнопкаНовыйОС <> Неопределено Тогда
		КнопкаНовыйОС.Доступность = ДоступностьИзменений;
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	                
	Если ИмяСобытия = "Запись_ШаблоныШтрихкодов" Тогда
		Элементы.Список.Обновить();
	КонецЕсли;
	  
КонецПроцедуры

&НаКлиенте
Процедура СоздатьНовыйОС(Команда)
	
	ПараметрыОткрытия = Новый Структура;
	ПараметрыОткрытия.Вставить("ОткрытьРедактор", Истина);
	ПараметрыОткрытия.Вставить("ТипШаблона", ПредопределенноеЗначение("Перечисление.ТипыШаблоновШтрихкодов.ОсновныеСредства"));
	ПараметрыОткрытия.Вставить("Ширина", 45);
	ПараметрыОткрытия.Вставить("Высота", 25);
	
	ОткрытьФорму("Справочник.ШаблоныШтрихкодов.ФормаОбъекта", ПараметрыОткрытия);
	
КонецПроцедуры

&НаКлиенте
Процедура СоздатьНовыйНоменклатура(Команда)
	
	ПараметрыОткрытия = Новый Структура;
	ПараметрыОткрытия.Вставить("ОткрытьРедактор", Истина);
	ПараметрыОткрытия.Вставить("ТипШаблона", ПредопределенноеЗначение("Перечисление.ТипыШаблоновШтрихкодов.Номенклатура"));
	ПараметрыОткрытия.Вставить("Ширина", 45);
	ПараметрыОткрытия.Вставить("Высота", 25);
	
	ОткрытьФорму("Справочник.ШаблоныШтрихкодов.ФормаОбъекта", ПараметрыОткрытия);
	
КонецПроцедуры

#КонецОбласти
