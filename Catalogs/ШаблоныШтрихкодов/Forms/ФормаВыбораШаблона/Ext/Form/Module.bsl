
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	Если Параметры.Свойство("ТипШаблона") Тогда
		
		Если Параметры.ТипШаблона = Перечисления.ТипыШаблоновШтрихкодов.Номенклатура Тогда
			ТипОбъектаДляПоиска = "Номенклатура";
		ИначеЕсли Параметры.ТипШаблона = Перечисления.ТипыШаблоновШтрихкодов.ОсновныеСредства Тогда
			ТипОбъектаДляПоиска = "ОС";
		Иначе
			ТипОбъектаДляПоиска = "Номенклатура";
		КонецЕсли;
		
	КонецЕсли;
	
	Для каждого Макет из Метаданные.НайтиПоТипу(Тип("СправочникСсылка.ШаблоныШтрихкодов")).Макеты Цикл
		Если Макет.ТипМакета = Метаданные.СвойстваОбъектов.ТипМакета.ТабличныйДокумент Тогда
			Если Найти(Макет.Имя, ТипОбъектаДляПоиска) > 0 Тогда
				Шаблон = Макет.Имя;
				Элементы.Шаблон.СписокВыбора.Добавить(Макет.Имя, Макет.Синоним);
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОК(Команда)
	
	Закрыть(Шаблон);
	
КонецПроцедуры

&НаКлиенте
Процедура ПриЗакрытии(ЗавершениеРаботы)
	ОповеститьОВыборе(Шаблон);
КонецПроцедуры

#КонецОбласти
