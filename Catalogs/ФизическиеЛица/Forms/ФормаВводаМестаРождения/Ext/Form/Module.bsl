
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("Представление") И ЗначениеЗаполнено(Параметры.Представление) Тогда
		
		//Выполняем разбор места рождения из строки, используем нижний регистр для представления.
		СтруктураМестоРождения = ПроцедурыУправленияПерсоналомКлиентСервер.РазложитьМестоРождения(Параметры.Представление, Ложь);
		
		Город = СтруктураМестоРождения.НаселенныйПункт;
		Район = СтруктураМестоРождения.Район;
		Область = СтруктураМестоРождения.Область;
		Страна = Справочники.КлассификаторСтранМира.НайтиПоНаименованию(СтруктураМестоРождения.Страна);
	Иначе 
		Страна = Справочники.КлассификаторСтранМира.Казахстан;
	КонецЕсли;

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

&НаКлиенте
Процедура КомандаЗаписатьИЗакрыть(Команда)

	МестоРожденияСтрокой = СокрЛП(Город)+","+СокрЛП(Район)+","+СокрЛП(Область)+","+СокрЛП(Страна);
	ПараметрыОповещения = Новый Структура("МестоРожденияПослеРедактирования", МестоРожденияСтрокой);
	Оповестить("ИзменениеМестаРождения", ПараметрыОповещения, ЭтотОбъект);
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОтмена(Команда)

	Закрыть();
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ